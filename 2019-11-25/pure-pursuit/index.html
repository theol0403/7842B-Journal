<!DOCTYPE html><html lang="en-US"><head><meta charset="UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=Edge" /><meta name="theme-color" content="#94ddff" /><meta http-equiv="cache-control" content="no-cache" /><meta http-equiv="expires" content="0" /><meta http-equiv="pragma" content="no-cache" /><title>Pure Pursuit - 7842B Journal</title><link rel="shortcut icon" href="https://theol0403.github.io/7842B-Journal/assets/images/favicon.ico" type="image/x-icon" /><link rel="stylesheet" href="https://theol0403.github.io/7842B-Journal/assets/css/just-the-docs.css" /> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2709176-10" ></script> <script> window.dataLayer = window.dataLayer || []; function gtag() { dataLayer.push(arguments); } gtag("js", new Date()); gtag("config", "UA-2709176-10"); </script> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/vendor/lunr.min.js" ></script> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/just-the-docs.js" ></script><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Pure Pursuit | 7842B Journal</title><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="Pure Pursuit" /><meta property="og:locale" content="en_US" /><meta name="description" content="Pure pursuit is a path following algorithm. Using odometry information and a path, pure pursuit controls how the robot should move to follow the path." /><meta property="og:description" content="Pure pursuit is a path following algorithm. Using odometry information and a path, pure pursuit controls how the robot should move to follow the path." /><link rel="canonical" href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/" /><meta property="og:url" content="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/" /><meta property="og:site_name" content="7842B Journal" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2019-11-25T00:00:00+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Pure Pursuit" /> <script type="application/ld+json"> {"@type":"BlogPosting","description":"Pure pursuit is a path following algorithm. Using odometry information and a path, pure pursuit controls how the robot should move to follow the path.","headline":"Pure Pursuit","dateModified":"2019-11-25T00:00:00+00:00","datePublished":"2019-11-25T00:00:00+00:00","url":"https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/","mainEntityOfPage":{"@type":"WebPage","@id":"https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/"},"@context":"https://schema.org"}</script><body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"><title>Link</title><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg><div class="page-wrap"><div class="side-bar"><div class="site-header"> <a href="https://theol0403.github.io/7842B-Journal" class="site-title lh-tight"><span class="bteam">7842B</span>&nbsp;Journal </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button></div><div class="navigation main-nav js-main-nav"><nav role="navigation" aria-label="Main navigation"><ul class="navigation-list"><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/404.html" class="navigation-list-link"></a><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/" class="navigation-list-link">Home</a><ul class="navigation-list-child-list "></ul><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/build" class="navigation-list-link">Build</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2021-03-31/example/" class="navigation-list-link">Example Entry</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2021-02-01/robot-v1/" class="navigation-list-link">Robot V1</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-07/Intakes/" class="navigation-list-link">Intake/Rollers Design</a></ul></ul><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/programming" class="navigation-list-link">Programming</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/skills" class="navigation-list-link">Skills</a></ul><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/archive" class="navigation-list-link">Archive</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-28/lib7842/" class="navigation-list-link">lib7842</a><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/" class="navigation-list-link active">Pure Pursuit</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-20/odom-x-controller/" class="navigation-list-link">Odom X Controller</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-15/odom-controller/" class="navigation-list-link">Odom Controller</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-10/tests/" class="navigation-list-link">Unit Tests</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-19/gui/" class="navigation-list-link">GUI</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-18/task-wrapper/" class="navigation-list-link">Task Wrapper</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-16/statemachine/" class="navigation-list-link">State Machine</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-15/motion-algorithms/" class="navigation-list-link">Motion Algorithms</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-11/claw-control/" class="navigation-list-link">Claw Control</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-10/lift-pid/" class="navigation-list-link">Lift PID</a><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-08-19/robot-showcase/" class="navigation-list-link">2018-19 Showcase</a></ul></ul></nav></div><footer class="site-footer"><p class="text-small text-grey-dk-000 mb-4">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p></footer></div><div class="main-content-wrap js-main-content" tabindex="0"><div class="main-content"><div class="page-header js-page-header"><div class="search"><div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search 7842B Journal" aria-label="Search 7842B Journal" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg></div><div class="js-search-results search-results-wrap"></div></div><ul class="list-style-none text-small aux-nav"><li class="d-inline-block my-0 mr-2"><a href="//github.com/pmarsceill/just-the-docs">Just the Docs on GitHub</a><li class="d-inline-block my-0 mr-2"><a href="/build">Build</a><li class="d-inline-block my-0"><a href="/programming">Programming</a></ul></div><div class="page"><nav class="breadcrumb-nav"><ol class="breadcrumb-nav-list"><li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/archive">All Posts</a><li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/">Archive</a><li class="breadcrumb-nav-list-item"><span>Pure Pursuit</span></ol></nav><div id="main-content" class="page-content" role="main"><h1> <a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/"> Pure Pursuit </a> - 2019-11-25</h1><article><p>Pure pursuit is a path following algorithm. Using odometry information and a path, pure pursuit controls how the robot should move to follow the path.</p><p>Pure pursuit has a few advantages:</p><ul><li>Motion profile capabilities: acceleration and velocity constraints<li>Expressive arcs and curves<li>Dynamic and feedback-based correction</ul><p>A great paper on adaptive pure pursuit can be found <a href="https://www.chiefdelphi.com/t/paper-implementation-of-the-adaptive-pure-pursuit-controller/166552/">here</a>.</p><h2 id="how-it-works"> <a href="#how-it-works" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> How it works</h2><p>Pure pursuit works by finding a <em>lookahead</em> on the path. It does this by finding the intersection of a circle of a given radius with the path. Then, the robot seeks the lookahead by calculating curvature and velocity to reach the lookahead.</p><p><img src="images/pure-pursuit.png" alt="" /></p><p><img src="images/lookahead.png" width="30%" /></p><h2 id="implementing-pure-pursuit"> <a href="#implementing-pure-pursuit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Implementing Pure Pursuit</h2><p>To test pursuit, I wrote a full simulation using javascript. I was able to implement all the logic and optimization in that controlled environment. Implementing algorithms in javascript is very useful, as it provides a visual way of testing the algorithm and the code can translate to C++ quite easily. This algorithm has been in progress since June 2019.</p><object width="100%" height="500" data="demos/pathGeneration/index.html"> </object><p>Here are the controls:</p><ul><li>Ctrl + Right-click to place robot<li>Click to place node<li>Click and drag to move node<li>Right-click node to delete<li>Right-click and drag to delete selection</ul><p>Here are the sliders:</p><ol><li>Sample resolution: how many points should be generated from the path formula<li>Smoothing constant: how smooth should the connections between segments be<li>Lookahead distance: how far along the path should the robot look</ol><h2 id="code"> <a href="#code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Code</h2><p>The majority of the code currently in lib7842 is used for pure pursuit. This includes path representations, path creation and interpolation, path velocity generation (motion profile), as well as the actual path follower.</p><p>Here is an example code for pure pursuit:</p><div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">auto</span> <span class="n">path</span> <span class="o">=</span> <span class="n">SimplePath</span><span class="p">({</span><span class="n">odom</span><span class="o">-&gt;</span><span class="n">getState</span><span class="p">(),</span> <span class="p">{</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">},</span> <span class="p">{</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">4</span><span class="n">_ft</span><span class="p">}})</span>
    <span class="p">.</span><span class="n">generate</span><span class="p">(</span><span class="mi">1</span><span class="n">_mm</span><span class="p">)</span>
    <span class="p">.</span><span class="n">smoothen</span><span class="p">(</span><span class="mf">.001</span><span class="p">,</span> <span class="mf">1e-10</span> <span class="o">*</span> <span class="n">meter</span><span class="p">);</span>
<span class="n">follower</span><span class="p">.</span><span class="n">followPath</span><span class="p">(</span><span class="n">PathGenerator</span><span class="o">::</span><span class="n">generate</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">limits</span><span class="p">),</span> <span class="nb">false</span><span class="p">);</span>
</code></pre></div></div></article><hr><footer role="contentinfo"><p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020-2021</p></footer></div></div></div></div>
