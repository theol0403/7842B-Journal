<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="IE=Edge" /> <meta name="theme-color" content="#94ddff" /> <meta http-equiv="cache-control" content="no-cache" /> <meta http-equiv="expires" content="0" /> <meta http-equiv="pragma" content="no-cache" /> <title>V2 Skills - 7842B Journal</title> <link rel="shortcut icon" href="https://theol0403.github.io/7842B-Journal/assets/images/favicon.ico" type="image/x-icon" /> <link rel="stylesheet" href="https://theol0403.github.io/7842B-Journal/assets/css/just-the-docs.css" /> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/vendor/lunr.min.js" ></script> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/just-the-docs.js" ></script> <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>V2 Skills | 7842B Journal</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="V2 Skills" /> <meta name="author" content="Theo Lemay" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Table of contents" /> <meta property="og:description" content="Table of contents" /> <link rel="canonical" href="https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/" /> <meta property="og:url" content="https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/" /> <meta property="og:site_name" content="7842B Journal" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2021-03-01T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="V2 Skills" /> <script type="application/ld+json"> {"@type":"BlogPosting","description":"Table of contents","mainEntityOfPage":{"@type":"WebPage","@id":"https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/"},"author":{"@type":"Person","name":"Theo Lemay"},"url":"https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/","headline":"V2 Skills","dateModified":"2021-03-01T00:00:00+00:00","datePublished":"2021-03-01T00:00:00+00:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="https://theol0403.github.io/7842B-Journal" class="site-title lh-tight"><span class="bteam">7842B</span>&nbsp;Journal </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/" class="navigation-list-link">Home</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/programming" class="navigation-list-link">Programming</a><ul class="navigation-list-child-list "><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/programming/skills" class="navigation-list-link">Skills</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-04/v1-skills/" class="navigation-list-link">V1 Skills</a> </li><li class="navigation-list-item active"> <a href="https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/" class="navigation-list-link active">V2 Skills</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-04-03/v3-skills/" class="navigation-list-link">V3 Skills</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/programming/intake" class="navigation-list-link">Intake Automation</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-20/intake-log-1/" class="navigation-list-link">Intake Log 1</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-24/intake-log-2/" class="navigation-list-link">Intake Log 2</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/programming/motion" class="navigation-list-link">Motion Control</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/" class="navigation-list-link">Introduction</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2020-06-22/trajectory-journal/" class="navigation-list-link">Trajectory Journal</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2020-12-10/trajectory-log-1/" class="navigation-list-link">Trajectory Log 1</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-15/trajectory-log-2/" class="navigation-list-link">Trajectory Log 2</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-02/trajectory-log-3/" class="navigation-list-link">Trajectory Log 3</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-19/vision-allignment/" class="navigation-list-link">Vision Allignment</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/build" class="navigation-list-link">Build</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2021-01-28/driver-skills/" class="navigation-list-link">Driver Skills</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v1/" class="navigation-list-link">Robot V1</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-01-20/intakes/" class="navigation-list-link">Intake Design</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-01-15/chassis/" class="navigation-list-link">Robot Chassis</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v2/" class="navigation-list-link">Robot V2</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-28/upgrades/" class="navigation-list-link">Upgrades</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-26/hood-changes/" class="navigation-list-link">Hood Changes</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-23/deflector/" class="navigation-list-link">Deflector</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v3/" class="navigation-list-link">Robot V3</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-04-02/hood-catapult/" class="navigation-list-link">Hood Catapult</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-29/intake-changes/" class="navigation-list-link">Intake changes</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-26/roller-changes/" class="navigation-list-link">Roller changes</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/archive" class="navigation-list-link">Archive</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-28/lib7842/" class="navigation-list-link">lib7842</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/" class="navigation-list-link">Pure Pursuit</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-20/odom-x-controller/" class="navigation-list-link">Odom X Controller</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-15/odom-controller/" class="navigation-list-link">Odom Controller</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-10/tests/" class="navigation-list-link">Unit Tests</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-19/gui/" class="navigation-list-link">GUI</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-18/task-wrapper/" class="navigation-list-link">Task Wrapper</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-16/statemachine/" class="navigation-list-link">State Machine</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-15/motion-algorithms/" class="navigation-list-link">Motion Algorithms</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-08-19/robot-showcase/" class="navigation-list-link">2018-19 Showcase</a></li></ul></li></ul> </nav> </div> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content "> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search 7842B Journal" aria-label="Search 7842B Journal" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0 mr-2"><a href="https://theol0403.github.io/7842B-Journal/build">Build</a></li> <li class="d-inline-block my-0"><a href="https://theol0403.github.io/7842B-Journal/programming">Programming</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/programming">Programming</a></li> <li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/programming/skills">Skills</a></li> <li class="breadcrumb-nav-list-item"><span>V2 Skills</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1> <a href="https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/"> V2 Skills </a> - March 01, 2021 </h1> <span class="author">Theo Lemay</span> <article><!-- prettier-ignore-start --> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#the-new-routine" id="markdown-toc-the-new-routine">The new routine</a></li> <li><a href="#update-march-3" id="markdown-toc-update-march-3">Update March 3</a></li> <li><a href="#update-march-7" id="markdown-toc-update-march-7">Update March 7</a></li> <li><a href="#code" id="markdown-toc-code">Code</a></li> </ol> <!-- prettier-ignore-end --> <p>For the competition of March 6, we plan to score all the goals. This would grant us a massive score thanks to completing all the combos.</p> <p>However, some improvements need to be made from the last autonomous:</p> <ul> <li>the starting orientation was not ideal, and it often caused the robot to knock the nearby ball into the way</li> <li>at this point, the motion algorithms now support strafing and arcing, making many more routes possible</li> <li>vision sensor alignment has been implemented, and seems to be very effective at improving consistency</li> <li>planning locations where the robot poops is very important to ensure the field is in a consistent state</li> <li>improving the intake timing is key to a consistent autonomous</li> </ul> <h2 id="the-new-routine"> <a href="#the-new-routine" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> The new routine </h2> <p>Keeping all the above points in mind, here is the new routine, where <span style="color: #e11720; font-weight: bold">red</span> is forward, <span style="color: #135bb5; font-weight: bold">blue</span> is backward, <span style="color: #34d07a; font-weight: bold">green</span> is turning, and <span style="color: #9141ac; font-weight: bold">purple</span> is strafing:</p> <p><img src="images/skills-v2.png" alt="" class="noshadow" /></p> <p>In total, there are 13 point turns. Notice the use of the new algorithm for smooth arcing to the goal.</p> <p>This autonomous builds upon v1, but introduces some more ambitious motions: the 3 curved arcs. However, we have a week to perfect it, so it should be doable.</p> <h2 id="update-march-3"> <a href="#update-march-3" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Update March 3 </h2> <p>The new routine is coming along well, and with vision sensor allignment, it is about 90% consistent at grabbing the red balls and driving to the goals.</p> <p>However, our largest source of error is from the timing of the intakes. Sometimes it leaves a blue ball in the goal. Sometimes it takes the red ball back out.</p> <p>Iterating the entire autonomous just to tweak the intake timing was much too slow of a process, so instead, we developed a plan:</p> <ul> <li>isolate the portion of the code responsible for a specific goal</li> <li>set the robot up at that goal and run the code</li> <li>tune the intake timing to be perfect</li> <li>repeat for each goal</li> </ul> <p>This worked very well: after tuning all the intake code, our success rate went from about 40% to 80%.</p> <p>Here is a video of the complete run:</p> <iframe width="560" height="315" src="https://www.youtube-nocookie.com/embed/ph_FwYNPAbk" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe> <p><br /></p> <h2 id="update-march-7"> <a href="#update-march-7" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Update March 7 </h2> <p>At our provincials, the autonomous was executed <strong>perfectly</strong>, with a score of 121… except the worst of luck struck! At one of the goals, a blue ball was resting on the outer ledge, like so:</p> <p><img src="images/ball-stuck.png" alt="" /></p> <p>Even though we had descored the ball, since it was inside the perimeter of the goal, it counted as scored. However, not only that, since it was slightly higher than the red ball (since it was on the lip), it counted the goal as blue-possessed. This fluke lost us 19 points!</p> <p>Unfortunately, our other runs weren’t perfect, so while we made a few more points, we were unable to reach our maximum score. It was still enough for us to win the competition, however.</p> <p>We learned that we need to be careful about outtaking the balls so that they don’t jam into the goals again. We also learned about the importance of tuning each goal individually for consistent results.</p> <h2 id="code"> <a href="#code" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Code </h2> <p>Here is the final autonomous code:</p> <div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">void</span> <span class="nf">shootCorner</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">topOut</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intakeWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">60</span><span class="p">);</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">shootEdge</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">topOut</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">intakeWithoutPoop</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">autonomous</span><span class="p">()</span> <span class="p">{</span>

  <span class="c1">// start facing right</span>
  <span class="n">Robot</span><span class="o">::</span><span class="n">imu</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">reset</span><span class="p">(</span><span class="mi">90</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// deploy after strafing from edge</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">strafe</span><span class="p">(</span><span class="n">Line</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mf">1.5</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">}));</span>

  <span class="n">roll</span><span class="p">(</span><span class="n">deploy</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intakeWithoutPoop</span><span class="p">);</span>

  <span class="cm">/* ------------------------------- first corner goal ------------------------------- */</span>

  <span class="c1">// to ball and goal</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">curve</span><span class="p">(</span><span class="n">Mesh</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_deg</span><span class="p">},</span> <span class="p">{</span><span class="mf">1.9</span><span class="n">_ft</span><span class="p">,</span> <span class="mf">3.8</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">70</span><span class="n">_deg</span><span class="p">}),</span> <span class="p">{});</span>

  <span class="c1">// shoot</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intakeWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">topOut</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">onWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">off</span><span class="p">);</span>

  <span class="c1">// back up</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">2.5</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ----------------------------- first edge goal ---------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">75</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">3.75</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">30</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// to goal</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">177</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mi">3</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">goal_seek</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">shootEdge</span><span class="p">();</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">0.85</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* --------------------------- second corner goal --------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">poopIn</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">92</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball and goal</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">curve</span><span class="p">(</span><span class="n">Mesh</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_deg</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mf">3.4</span><span class="n">_ft</span><span class="p">,</span> <span class="mf">5.75</span><span class="n">_ft</span><span class="p">,</span> <span class="o">-</span><span class="mi">85</span><span class="n">_deg</span><span class="p">}),</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">10</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">shootCorner</span><span class="p">();</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ---------------------------- second edge goal ---------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">16</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">3.2</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">20</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// to goal</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">92</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mi">3</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">goal_seek</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">topOut</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">shootWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">500</span><span class="p">);</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">350</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">intakeWithoutPoop</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">1.6</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ---------------------------- third corner goal --------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">poopIn</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">4.3</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// to goal</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">61</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">3.3</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">goal_seek</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">shootCorner</span><span class="p">();</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ----------------------------- third edge goal ---------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">111</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">4.35</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">30</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// to goal</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">3.1</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">goal_seek</span> <span class="o">=</span> <span class="mi">50</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">shootEdge</span><span class="p">();</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">1.2</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* --------------------------- fourth corner goal --------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">poopIn</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">77</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball and goal</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">curve</span><span class="p">(</span><span class="n">Mesh</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_deg</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mi">3</span><span class="n">_ft</span><span class="p">,</span> <span class="mf">6.25</span><span class="n">_ft</span><span class="p">,</span> <span class="o">-</span><span class="mi">80</span><span class="n">_deg</span><span class="p">}),</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">10</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// shoot</span>
  <span class="n">shootCorner</span><span class="p">();</span>

  <span class="c1">// back up</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">1.6</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ---------------------------- fourth edge goal ---------------------------- */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">172</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">4.27</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">40</span><span class="n">_pct</span><span class="p">});</span>

  <span class="c1">// to goal</span>
  <span class="n">turn</span><span class="p">(</span><span class="mi">81</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">0.9</span><span class="n">_ft</span><span class="p">);</span>

  <span class="c1">// shoot</span>
  <span class="n">shootEdge</span><span class="p">();</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">onWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>

  <span class="c1">// back up</span>
  <span class="n">asyncTask</span><span class="p">({</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">400</span><span class="p">);</span>
    <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mf">0.8</span><span class="n">_ft</span><span class="p">);</span>

  <span class="cm">/* ------------------------------- center goal ------------------------------ */</span>

  <span class="c1">// purge and turn</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">out</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">200</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">94</span><span class="n">_deg</span><span class="p">);</span>

  <span class="c1">// to ball</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">intake</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="mi">2</span><span class="n">_ft</span><span class="p">,</span> <span class="p">{.</span><span class="n">ball_seek</span> <span class="o">=</span> <span class="mi">0</span><span class="n">_pct</span><span class="p">});</span>

  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">97</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">Timer</span> <span class="n">t</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="n">getDtFromStart</span><span class="p">()</span> <span class="o">&lt;</span> <span class="mf">0.2</span><span class="n">_s</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">Robot</span><span class="o">::</span><span class="n">model</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">xArcade</span><span class="p">((</span><span class="n">Robot</span><span class="o">::</span><span class="n">vision</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">getBlueOffset</span><span class="p">())</span> <span class="o">*</span> <span class="mf">0.025</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">strafe</span><span class="p">(</span><span class="n">Line</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">},</span> <span class="p">{</span><span class="mf">0.55</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">}));</span>

  <span class="c1">// move to poke</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">1.42</span><span class="n">_ft</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="n">_ft</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">97</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">strafe</span><span class="p">(</span><span class="n">Line</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">},</span> <span class="p">{</span><span class="o">-</span><span class="mf">0.4</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">}));</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">1.4</span><span class="n">_ft</span><span class="p">);</span>
  <span class="n">roll</span><span class="p">(</span><span class="n">onWithoutPoop</span><span class="p">);</span>
  <span class="n">pros</span><span class="o">::</span><span class="n">delay</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="n">_ft</span><span class="p">);</span>
  <span class="n">turn</span><span class="p">(</span><span class="o">-</span><span class="mi">97</span><span class="n">_deg</span><span class="p">);</span>
  <span class="n">move</span><span class="o">-&gt;</span><span class="n">strafe</span><span class="p">(</span><span class="n">Line</span><span class="p">({</span><span class="mi">0</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">},</span> <span class="p">{</span><span class="mf">0.75</span><span class="n">_ft</span><span class="p">,</span> <span class="mi">0</span><span class="n">_ft</span><span class="p">}));</span>
  <span class="n">drive</span><span class="p">(</span><span class="mf">1.3</span><span class="n">_ft</span><span class="p">);</span>
  <span class="n">drive</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="n">_ft</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div> </article> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020-2021</p> </footer> </div> </div> </div> </div> </body> </html> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
