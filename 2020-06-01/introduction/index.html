<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="IE=Edge" /> <meta name="theme-color" content="#94ddff" /> <meta http-equiv="cache-control" content="no-cache" /> <meta http-equiv="expires" content="0" /> <meta http-equiv="pragma" content="no-cache" /> <title>Introduction - 7842B Journal</title> <link rel="shortcut icon" href="https://theol0403.github.io/7842B-Journal/assets/images/favicon.ico" type="image/x-icon" /> <link rel="stylesheet" href="https://theol0403.github.io/7842B-Journal/assets/css/just-the-docs.css" /> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/vendor/lunr.min.js" ></script> <script type="text/javascript" src="https://theol0403.github.io/7842B-Journal/assets/js/just-the-docs.js" ></script> <meta name="viewport" content="width=device-width, initial-scale=1" /> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Introduction | 7842B Journal</title> <meta name="generator" content="Jekyll v4.2.0" /> <meta property="og:title" content="Introduction" /> <meta name="author" content="Theo Lemay" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Table of contents" /> <meta property="og:description" content="Table of contents" /> <link rel="canonical" href="https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/" /> <meta property="og:url" content="https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/" /> <meta property="og:site_name" content="7842B Journal" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-06-01T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Introduction" /> <script type="application/ld+json"> {"@type":"BlogPosting","description":"Table of contents","mainEntityOfPage":{"@type":"WebPage","@id":"https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/"},"author":{"@type":"Person","name":"Theo Lemay"},"url":"https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/","headline":"Introduction","dateModified":"2020-06-01T00:00:00+00:00","datePublished":"2020-06-01T00:00:00+00:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="link" viewBox="0 0 16 16"> <title>Link</title> <path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path> </symbol> </svg> <div class="page-wrap"> <div class="side-bar"> <div class="site-header"> <a href="https://theol0403.github.io/7842B-Journal" class="site-title lh-tight"><span class="bteam">7842B</span>&nbsp;Journal </a> <button class="menu-button fs-3 js-main-nav-trigger" data-text-toggle="Hide" type="button">Menu</button> </div> <div class="navigation main-nav js-main-nav"> <nav role="navigation" aria-label="Main navigation"> <ul class="navigation-list"><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/404.html" class="navigation-list-link"></a></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/2021-02-26/hood-changes/" class="navigation-list-link">Hood Changes</a></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/" class="navigation-list-link">Home</a><ul class="navigation-list-child-list "></ul></li><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/programming" class="navigation-list-link">Programming</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/programming/skills" class="navigation-list-link">Skills</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-04/v1-skills/" class="navigation-list-link">V1 Skills</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-01/v2-skills/" class="navigation-list-link">V2 Skills</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-04-03/v3-skills/" class="navigation-list-link">V3 Skills</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/programming/intake" class="navigation-list-link">Intake Automation</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-24/intake-log-2/" class="navigation-list-link">Intake Log 2</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-20/intake-log-1/" class="navigation-list-link">Intake Log 1</a> </li></ul></li><li class="navigation-list-item active"><a href="https://theol0403.github.io/7842B-Journal/programming/motion" class="navigation-list-link">Motion Control</a><ul class="navigation-list-child-list"><li class="navigation-list-item active"> <a href="https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/" class="navigation-list-link active">Introduction</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/build" class="navigation-list-link">Build</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v1/" class="navigation-list-link">Robot V1</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-01-20/intakes/" class="navigation-list-link">Intake Design</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-01-15/chassis/" class="navigation-list-link">Robot Chassis</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v2/" class="navigation-list-link">Robot V2</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-28/upgrades/" class="navigation-list-link">Upgrades</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-02-23/deflector/" class="navigation-list-link">Deflector</a> </li></ul></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/build/v3/" class="navigation-list-link">Robot V3</a><ul class="navigation-list-child-list"><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-04-02/hood-catapult/" class="navigation-list-link">Hood Catapult</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-29/intake-changes/" class="navigation-list-link">Intake changes</a> </li><li class="navigation-list-item "> <a href="https://theol0403.github.io/7842B-Journal/2021-03-26/roller-changes/" class="navigation-list-link">Roller changes</a> </li></ul></li></ul></li><li class="navigation-list-item"><a href="https://theol0403.github.io/7842B-Journal/archive" class="navigation-list-link">Archive</a><ul class="navigation-list-child-list "><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-28/lib7842/" class="navigation-list-link">lib7842</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/" class="navigation-list-link">Pure Pursuit</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-20/odom-x-controller/" class="navigation-list-link">Odom X Controller</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-15/odom-controller/" class="navigation-list-link">Odom Controller</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-11-10/tests/" class="navigation-list-link">Unit Tests</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-19/gui/" class="navigation-list-link">GUI</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-18/task-wrapper/" class="navigation-list-link">Task Wrapper</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-16/statemachine/" class="navigation-list-link">State Machine</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-10-15/motion-algorithms/" class="navigation-list-link">Motion Algorithms</a></li><li class="navigation-list-item "><a href="https://theol0403.github.io/7842B-Journal/2019-08-19/robot-showcase/" class="navigation-list-link">2018-19 Showcase</a></li></ul></li></ul> </nav> </div> </div> <div class="main-content-wrap js-main-content" tabindex="0"> <div class="main-content"> <div class="page-header js-page-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search 7842B Journal" aria-label="Search 7842B Journal" autocomplete="off"> <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg> </div> <div class="js-search-results search-results-wrap"></div> </div> <ul class="list-style-none text-small aux-nav"> <li class="d-inline-block my-0 mr-2"><a href="https://theol0403.github.io/7842B-Journal/build">Build</a></li> <li class="d-inline-block my-0"><a href="https://theol0403.github.io/7842B-Journal/programming">Programming</a></li> </ul> </div> <div class="page"> <nav class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/programming">Programming</a></li> <li class="breadcrumb-nav-list-item"><a href="https://theol0403.github.io/7842B-Journal/programming/motion">Motion Control</a></li> <li class="breadcrumb-nav-list-item"><span>Introduction</span></li> </ol> </nav> <div id="main-content" class="page-content" role="main"> <h1> <a href="https://theol0403.github.io/7842B-Journal/2020-06-01/introduction/"> Introduction </a> - June 01, 2020 </h1> <span class="author">Theo Lemay</span> <article><!-- prettier-ignore-start --> <h2 class="no_toc text-delta" id="table-of-contents"> <a href="#table-of-contents" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Table of contents </h2> <ol id="markdown-toc"> <li><a href="#reflection" id="markdown-toc-reflection">Reflection</a> <ol> <li><a href="#odometry" id="markdown-toc-odometry">Odometry</a></li> <li><a href="#closed-loop-issues" id="markdown-toc-closed-loop-issues">Closed-loop issues</a></li> </ol> </li> <li><a href="#requirements" id="markdown-toc-requirements">Requirements</a></li> <li><a href="#solutions" id="markdown-toc-solutions">Solutions</a> <ol> <li><a href="#pure-pursuit" id="markdown-toc-pure-pursuit">Pure Pursuit</a></li> </ol> </li> <li><a href="#open-loop-control" id="markdown-toc-open-loop-control">Open Loop Control</a></li> </ol> <!-- prettier-ignore-end --> <h2 id="reflection"> <a href="#reflection" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Reflection </h2> <p>To execute any autonomous routine, the robot needs <strong>movement algorithms</strong>. These are functions that use sensors, controllers, and kinematics to move the robot somewhere.</p> <p>My focus in VEX has been developing such algorithms:</p> <ul> <li>2018: <a href="https://theol0403.github.io/7842B-Journal/2019-11-15/odom-controller/">Tank drive odometry PID</a> (taken from <a href="https://theol0403.github.io/7842B-Journal/2019-08-19/robot-showcase/#odometryautonomous">here</a>)</li> <li>2019: <a href="https://theol0403.github.io/7842B-Journal/2019-11-20/odom-x-controller/">X drive odometry PID</a></li> <li>2019: <a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/">Pure Pursuit</a></li> </ul> <p>All these algorithms can achieve various motions and require odometry. However, they all have various weaknesses.</p> <h3 id="odometry"> <a href="#odometry" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Odometry </h3> <p>The main use of odometry is to unlock many possibilities of motion control. This is because you now have access to much more information that you can feed into the algorithms. For example, if you know the coordinates of the robot, and you want to drive to some other coordinate, it is trivial to calculate position and orientation error and then use PID-based algorithms to minimize that error.</p> <p>Odometry, however, is a tricky task:</p> <ul> <li>it drifts a ton</li> <li>it requires a robot designed with perfectly calibrated tracking wheels</li> <li>it requires much tuning</li> <li>it is sensitive to rocking, vibrations, etc</li> </ul> <h3 id="closed-loop-issues"> <a href="#closed-loop-issues" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Closed-loop issues </h3> <p>Assuming the robot has perfectly tuned odometry, you still run into issues. This is because anything directly using odometry is inherently a <strong>closed loop controller</strong>. This means that the controller’s <strong>output</strong> is a direct function of the robot’s <strong>error</strong> (calculated from <strong>state</strong>).</p> <p><img src="https://theol0403.github.io/7842B-Journal/assets/images/control.jpeg" alt="" /></p> <p>While this theoretically seems like a good thing, as the robot can use sensors to correct for disturbances and errors, consider some realities:</p> <ul> <li>in VEX (especially skills), there is nothing that will interfere with the robot</li> <li>if something is wrong, misalligned, or stuck, odometry can’t fix that</li> <li>using vex sensors for localization is not accurate, fast, or smooth</li> </ul> <p>Instead, what ends up happening is that <strong>odom introduces noise and variance</strong> into the controller, in a vicious cycle of tracking error -&gt; correction -&gt; more error -&gt; <strong>unpredictable error</strong>.</p> <p>Is the definition of smooth, consistent control “do the exact same thing every time”, or “aggressively minimize error until the sensors say you are at your destination”? I believe it is the former.</p> <h2 id="requirements"> <a href="#requirements" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Requirements </h2> <p>Is there a way to achieve the benefits of odometry (more complex and versatile algorithms) without being overreliant on sensors?</p> <p>I need to develop a motion algorithm that matches the following criteria:</p> <ul> <li>follow any arbitrary path that is represented by a mathematical function</li> <li>use robot kinematics and math to ensure smooth, consistent control <strong>by default</strong></li> <li>remove a dependence on difficult and noisy sensors</li> <li>support <strong>sensor augmentation</strong> which can use sensors to <strong>correct, not steer</strong></li> </ul> <p>This season, driving complex paths will be very useful. Therefore, while moving in straight lines/arcs is useful, we need more.</p> <p>Specifically, we want the robot to follow a <strong>parametric spline</strong>. A parametric spline is a function that gives \((x, y)\) as a function of \(t\).</p> <p><img src="images/spline.png" alt="" class="noshadow" /></p> <p>We need to design an algorithm that takes a <strong>spline</strong> as an input and outputs <strong>motor voltages</strong> for each side of the robot.</p> <h2 id="solutions"> <a href="#solutions" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Solutions </h2> <h3 id="pure-pursuit"> <a href="#pure-pursuit" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Pure Pursuit </h3> <p>One option is <a href="https://theol0403.github.io/7842B-Journal/2019-11-25/pure-pursuit/">Pure Pursuit</a>, an algorithm that uses odometry to project a point along a spline spline for it to “seek”.</p> <p>However, since pure pursuit is a closed-loop controller that takes the robot’s current state, measured by sensors (position, speed), and calculates how the robot should move, it falls into the problems with closed-loop control mentioned above - namely this it is unstable, unpredictable, inconsistent, and not smooth.</p> <p><img src="images/pure.png" alt="" /></p> <h2 id="open-loop-control"> <a href="#open-loop-control" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#link"></use></svg></a> Open Loop Control </h2> <p>What if we made an algorithm that generates wheel velocities for the robot to follow exactly:</p> <ul> <li>An open loop controller plans how it will move ahead of time.</li> <li>The motion is guaranteed to be smooth, consistent, optimal, and therefore repeatable</li> <li>Any tracking error will often be repeatable</li> </ul> <p>However, this means we need to be more deliberate with the calculations. Any errors won’t be compensated for. If the smooth control is not consistent enough, sensors can be used to correct the motion.</p> <p><img src="images/open.jpg" alt="" /></p> <p>In short, we want to design a <strong>trajectory generator</strong>, where the input is a spline, and the output is wheel velocites.</p> </article> <hr> <footer role="contentinfo"> <p class="text-small text-grey-dk-000 mb-0">Copyright &copy; 2020-2021</p> </footer> </div> </div> </div> </div> </body> </html> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
